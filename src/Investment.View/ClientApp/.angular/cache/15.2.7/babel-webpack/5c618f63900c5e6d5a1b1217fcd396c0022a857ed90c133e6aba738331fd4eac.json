{"ast":null,"code":"import _asyncToGenerator from \"/Users/welingtonmarquezini/Projects/Investment/src/Investment.View/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { EventEmitter } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/disciplina.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\nfunction DisciplinaComponent_div_18_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"o Descri\\u00E7\\u00E3o Disciplina \\u00E9 obrigat\\u00F3rio. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DisciplinaComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtemplate(1, DisciplinaComponent_div_18_p_1_Template, 2, 0, \"p\", 18);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.descricaoDisciplina.errors == null ? null : ctx_r1.descricaoDisciplina.errors[\"required\"]);\n  }\n}\nfunction DisciplinaComponent_option_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const curso_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", curso_r6.descricaoCurso);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(curso_r6.descricaoCurso);\n  }\n}\nfunction DisciplinaComponent_option_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const professor_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", professor_r7.nome);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(professor_r7.nome);\n  }\n}\nfunction DisciplinaComponent_table_38_tr_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 25);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 25);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 25);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 25);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 25);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 25)(12, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function DisciplinaComponent_table_38_tr_18_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const disciplina_r9 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.edit(disciplina_r9));\n    });\n    i0.ɵɵtext(13, \"Editar\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\u00A0\\u00A0 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\", 25)(16, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function DisciplinaComponent_table_38_tr_18_Template_button_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const disciplina_r9 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r12.delete(disciplina_r9));\n    });\n    i0.ɵɵtext(17, \"Delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18, \"\\u00A0\\u00A0 \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const disciplina_r9 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", disciplina_r9.idDisciplina, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", disciplina_r9.descricaoDisciplina, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", disciplina_r9.quantidadeAlunos, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", disciplina_r9.curso.descricaoCurso, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", disciplina_r9.professor.nome, \"\");\n  }\n}\nfunction DisciplinaComponent_table_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 20)(1, \"thead\", 21)(2, \"tr\", 22)(3, \"td\", 23);\n    i0.ɵɵtext(4, \"Id Disciplina\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 23);\n    i0.ɵɵtext(6, \"Descri\\u00E7\\u00E3o Disciplina\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 23);\n    i0.ɵɵtext(8, \"Quantidade Alunos\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 23);\n    i0.ɵɵtext(10, \"Curso\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 23);\n    i0.ɵɵtext(12, \"Professor\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\", 23);\n    i0.ɵɵtext(14, \"Editar Aluno\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\", 23);\n    i0.ɵɵtext(16, \"Excluir Aluno\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(17, \"tbody\");\n    i0.ɵɵtemplate(18, DisciplinaComponent_table_38_tr_18_Template, 19, 5, \"tr\", 24);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(18);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.disciplinas);\n  }\n}\nexport class DisciplinaComponent {\n  constructor(disciplinaService, fb) {\n    this.disciplinaService = disciplinaService;\n    this.fb = fb;\n    this.onSubmit = new EventEmitter();\n    this.disciplinas = [];\n    this.disciplina = {};\n    this.cursos = [];\n    this.professores = [];\n    this.formLabel = \"\";\n    this.isEditMode = false;\n    this.fb.group({\n      'idDisciplina': [\"\"],\n      'descricaoDisciplina': [\"\", Validators.required],\n      'professor': [\"\", Validators.required],\n      'curso': [\"\", Validators.required]\n    });\n    this.formLabel = \"Adicionar Disciplina\";\n  }\n  ngOnInit() {\n    this.getDisciplinas();\n    this.getCursos();\n    this.getProfessores();\n    this.form = new FormGroup({\n      idDisciplina: new FormControl(''),\n      descricaoDisciplina: new FormControl('', [Validators.required]),\n      professor: new FormControl('', [Validators.required]),\n      curso: new FormControl('')\n    });\n    console.log(this.form);\n  }\n  get idDisciplina() {\n    return this.form.get(\"idDisciplina\");\n  }\n  get descricaoDisciplina() {\n    return this.form.get(\"descricaoDisciplina\");\n  }\n  get professor() {\n    return this.form.get(\"professor\");\n  }\n  get curso() {\n    return this.form.get(\"curso\");\n  }\n  getDisciplinas() {\n    this.disciplinaService.getDisciplinas().subscribe(data => {\n      this.disciplinas = data;\n    }, error => alert(error), () => console.log(this.disciplinas));\n  }\n  getCursos() {\n    this.disciplinaService.getCursos().subscribe(data => {\n      this.cursos = data;\n    }, error => alert(error), () => console.log(this.cursos));\n  }\n  getProfessores() {\n    this.disciplinaService.getProfessores().subscribe(data => {\n      this.professores = data;\n    }, error => alert(error), () => console.log(this.professores));\n  }\n  submit() {\n    if (this.form.invalid) {\n      return;\n    }\n    this.disciplina.descricaoDisciplina = this.form.controls['descricaoDisciplina'].value;\n    this.cursos.forEach(curso => {\n      if (curso.descricaoCurso == this.form.controls['curso'].value) {\n        this.disciplina.curso = curso;\n      }\n    });\n    this.professores.forEach(professor => {\n      if (professor.nome == this.form.controls['professor'].value) {\n        this.disciplina.professor = professor;\n      }\n    });\n    if (!this.isEditMode) {\n      this.disciplinaService.addDisciplina(this.disciplina).subscribe(resp => {\n        this.getDisciplinas(), this.form.reset();\n      });\n    } else {\n      this.disciplinaService.editDisciplina(this.disciplina).subscribe(resp => {\n        this.getDisciplinas(), this.form.reset();\n      });\n      this.cancel();\n    }\n    this.form.dirty;\n  }\n  send(event) {\n    return _asyncToGenerator(function* () {})();\n  }\n  edit(disciplina) {\n    this.formLabel = \"Editar Disciplina\";\n    this.isEditMode = true;\n    this.disciplina = disciplina;\n    this.form.get(\"descricaoDisciplina\")?.setValue(disciplina.descricaoDisciplina);\n    this.form.get(\"curso\")?.setValue(disciplina.curso.descricaoCurso);\n    this.form.get(\"professor\")?.setValue(disciplina.professor.nome);\n  }\n  delete(disciplina) {\n    if (confirm(\"Deseja excluir este Disciplina?\")) {\n      this.disciplinaService.deleteDisciplina(disciplina).subscribe(response => {\n        this.getDisciplinas();\n        this.form.reset();\n      });\n    }\n  }\n  cancel() {\n    this.formLabel = \"Adicionar Disciplina\";\n    this.isEditMode = false;\n    this.disciplina = {};\n    this.form.get(\"descricaoDisciplina\")?.setValue('');\n    this.form.get(\"curso\")?.setValue('');\n    this.form.get(\"professor\")?.setValue('');\n    this.form.dirty;\n  }\n}\nDisciplinaComponent.ɵfac = function DisciplinaComponent_Factory(t) {\n  return new (t || DisciplinaComponent)(i0.ɵɵdirectiveInject(i1.DisciplinaService), i0.ɵɵdirectiveInject(i2.FormBuilder));\n};\nDisciplinaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DisciplinaComponent,\n  selectors: [[\"app-disciplina\"]],\n  inputs: {\n    onSubmit: \"onSubmit\",\n    btnText: \"btnText\"\n  },\n  decls: 40,\n  vars: 6,\n  consts: [[1, \"row\"], [1, \"col-xs-12\", \"col-sm-8\", \"col-md-10\"], [3, \"formGroup\", \"ngSubmit\"], [\"formDir\", \"ngForm\"], [1, \"form-horizontal\"], [1, \"form-group\"], [1, \"control-label\", \"col-sm-12\"], [1, \"col-xs-12\", \"col-sm-6\"], [\"type\", \"text\", \"formControlName\", \"descricaoDisciplina\", \"required\", \"\", 1, \"form-control\"], [\"class\", \"validation-error\", 4, \"ngIf\"], [\"id\", \"curso\", \"formControlName\", \"curso\", 1, \"form-control\", \"form-select\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"professor\", \"formControlName\", \"professor\", 1, \"form-control\", \"form-select\"], [1, \"form-footer\", \"col-xs-12\", \"col-sm-3\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"onSubmit\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [\"class\", \"table table-striped table-bordered table-condensed table-hover\", 4, \"ngIf\"], [1, \"validation-error\"], [4, \"ngIf\"], [3, \"value\"], [1, \"table\", \"table-striped\", \"table-bordered\", \"table-condensed\", \"table-hover\"], [1, \"thead-dark\"], [1, \"table-light\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [\"scope\", \"row\", 1, \"align-middle\"], [1, \"btn\", \"btn\", \"btn-success\", 3, \"click\"], [1, \"btn\", \"btn-danger\", 3, \"click\"]],\n  template: function DisciplinaComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\");\n      i0.ɵɵtext(1, \"Disciplina\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(2, \"br\")(3, \"hr\");\n      i0.ɵɵelementStart(4, \"section\")(5, \"div\", 0)(6, \"div\", 1)(7, \"h2\");\n      i0.ɵɵtext(8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(9, \"br\");\n      i0.ɵɵelementStart(10, \"form\", 2, 3);\n      i0.ɵɵlistener(\"ngSubmit\", function DisciplinaComponent_Template_form_ngSubmit_10_listener() {\n        return ctx.submit();\n      });\n      i0.ɵɵelementStart(12, \"div\", 4)(13, \"div\", 5)(14, \"label\", 6);\n      i0.ɵɵtext(15, \"Descri\\u00E7\\u00E3o Disciplina: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"div\", 7);\n      i0.ɵɵelement(17, \"input\", 8);\n      i0.ɵɵtemplate(18, DisciplinaComponent_div_18_Template, 2, 1, \"div\", 9);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(19, \"div\", 5)(20, \"label\", 6);\n      i0.ɵɵtext(21, \"Curso: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"div\", 7)(23, \"select\", 10);\n      i0.ɵɵtemplate(24, DisciplinaComponent_option_24_Template, 2, 2, \"option\", 11);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(25, \"div\", 5)(26, \"label\", 6);\n      i0.ɵɵtext(27, \"Professor: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"div\", 7)(29, \"select\", 12);\n      i0.ɵɵtemplate(30, DisciplinaComponent_option_30_Template, 2, 2, \"option\", 11);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(31, \"div\", 13)(32, \"button\", 14);\n      i0.ɵɵlistener(\"onSubmit\", function DisciplinaComponent_Template_button_onSubmit_32_listener($event) {\n        return ctx.send($event);\n      });\n      i0.ɵɵtext(33, \"Salvar\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(34, \"\\u00A0\\u00A0\\u00A0 \");\n      i0.ɵɵelementStart(35, \"button\", 15);\n      i0.ɵɵlistener(\"click\", function DisciplinaComponent_Template_button_click_35_listener() {\n        return ctx.cancel();\n      });\n      i0.ɵɵtext(36, \"Cancelar\");\n      i0.ɵɵelementEnd()()()()()()();\n      i0.ɵɵelement(37, \"hr\");\n      i0.ɵɵtemplate(38, DisciplinaComponent_table_38_Template, 19, 1, \"table\", 16);\n      i0.ɵɵelement(39, \"br\");\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(11);\n      i0.ɵɵadvance(8);\n      i0.ɵɵtextInterpolate(ctx.formLabel);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngIf\", ctx.descricaoDisciplina.invalid && _r0.submitted);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngForOf\", ctx.cursos);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngForOf\", ctx.professores);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngIf\", ctx.disciplinas.length);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i2.ɵNgNoValidate, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.DefaultValueAccessor, i2.SelectControlValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.RequiredValidator, i2.FormGroupDirective, i2.FormControlName],\n  styles: [\".validation-error[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n    color: #dc3545;\\n    margin-top: 0.4em; \\n    border-left: 3px solid O#dc3545;\\n    padding-left: 0.2em;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZGlzY2lwbGluYS9kaXNjaXBsaW5hLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxjQUFjO0lBQ2QsaUJBQWlCO0lBQ2pCLCtCQUErQjtJQUMvQixtQkFBbUI7QUFDdkIiLCJzb3VyY2VzQ29udGVudCI6WyIudmFsaWRhdGlvbi1lcnJvciBwIHtcbiAgICBjb2xvcjogI2RjMzU0NTtcbiAgICBtYXJnaW4tdG9wOiAwLjRlbTsgXG4gICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCBPI2RjMzU0NTtcbiAgICBwYWRkaW5nLWxlZnQ6IDAuMmVtO1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["EventEmitter","FormGroup","FormControl","Validators","i0","DisciplinaComponent","constructor","disciplinaService","fb","group","required","formLabel","ngOnInit","getDisciplinas","getCursos","getProfessores","form","idDisciplina","descricaoDisciplina","professor","curso","console","log","get","subscribe","data","disciplinas","error","alert","cursos","professores","submit","invalid","disciplina","controls","value","forEach","descricaoCurso","nome","isEditMode","addDisciplina","resp","reset","editDisciplina","cancel","dirty","send","event","edit","setValue","delete","confirm","deleteDisciplina","response","selectors","inputs","onSubmit","btnText","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/welingtonmarquezini/Projects/Investment/src/Investment.View/ClientApp/src/app/disciplina/disciplina.component.ts","/Users/welingtonmarquezini/Projects/Investment/src/Investment.View/ClientApp/src/app/disciplina/disciplina.component.html"],"sourcesContent":["import { Component, Input, OnInit, EventEmitter } from '@angular/core';\nimport { FormGroup, FormControl, FormBuilder, Validators } from '@angular/forms';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { ICurso } from '../models/curso.interface';\nimport { IDisciplina } from '../models/disciplina.interface';\nimport { IProfessor } from '../models/professor.interface';\nimport { DisciplinaService } from '../services/disciplina.service';\n\n@Component({\n  selector: 'app-disciplina',\n  templateUrl: './disciplina.component.html',\n  styleUrls: ['./disciplina.component.css']\n})\nexport class DisciplinaComponent implements OnInit {\n\n  @Input() onSubmit = new EventEmitter<IDisciplina>();\n  @Input() btnText!: string;\n  disciplinas : IDisciplina[] = [];\n  disciplina : IDisciplina = <IDisciplina>{};\n  cursos : ICurso[] = [];\n  professores : IProfessor[] = [];\n  formLabel : string = \"\";\n  isEditMode : boolean = false;\n  form! : FormGroup;\n  \n  constructor(private disciplinaService : DisciplinaService,\n              private fb : FormBuilder) {\n            this.fb.group({\n              'idDisciplina' : [\"\"],\n              'descricaoDisciplina' : [\"\", Validators.required],\n              'professor' : [\"\", Validators.required],\n              'curso' : [\"\", Validators.required]\n            });\n\n        this.formLabel = \"Adicionar Disciplina\";\n    }\n\n    ngOnInit(): void {\n      this.getDisciplinas();\n      this.getCursos();\n      this.getProfessores();\n      this.form = new FormGroup({\n        idDisciplina: new FormControl(''),\n        descricaoDisciplina: new FormControl('', [Validators.required]),\n        professor: new FormControl('',[Validators.required]),\n        curso: new FormControl('')\n\n      });\n      console.log(this.form);\n    }\n    \n    get idDisciplina(){\n      return this.form.get(\"idDisciplina\")!;\n    }\n\n    get descricaoDisciplina (){\n      return this.form.get(\"descricaoDisciplina\")!;\n    }\n\n    get professor (){\n      return this.form.get(\"professor\")!;\n    }\n\n    get curso (){\n      return this.form.get(\"curso\")!;\n    }\n\n    private getDisciplinas(){\n      \n        this.disciplinaService.getDisciplinas().subscribe(\n            data => { this.disciplinas = data},\n            error => alert(error),\n            () => console.log(this.disciplinas)\n        );\n    }\n\n    private getCursos(){\n      \n      this.disciplinaService.getCursos().subscribe(\n          data => { this.cursos = data},\n          error => alert(error),\n          () => console.log(this.cursos)\n      );\n    }\n\n    private getProfessores(){\n      \n      this.disciplinaService.getProfessores().subscribe(\n          data => { this.professores = data},\n          error => alert(error),\n          () => console.log(this.professores)\n      );\n    }\n\n    submit() {\n        if (this.form.invalid) {\n          return;\n        }\n\n        this.disciplina.descricaoDisciplina = this.form.controls['descricaoDisciplina'].value;\n        \n        this.cursos.forEach(curso => {\n          if(curso.descricaoCurso == this.form.controls['curso'].value) {\n            this.disciplina.curso = curso;  \n          }\n        });\n        \n        this.professores.forEach(professor =>{\n            if (professor.nome == this.form.controls['professor'].value) {\n              this.disciplina.professor = professor;  \n            }\n        });\n        \n        if(!(this.isEditMode)){\n            this.disciplinaService.addDisciplina(this.disciplina)\n            .subscribe(resp =>{\n                    this.getDisciplinas(),\n                    this.form.reset()\n            });\n        } else {\n            this.disciplinaService.editDisciplina(this.disciplina)\n            .subscribe(resp =>{\n                    this.getDisciplinas(),\n                    this.form.reset()\n            });\n            this.cancel();\n        }\n\n        this.form.dirty;\n        \n    }\n\n    async send(event : any) {\n    }; \n\n    edit(disciplina : IDisciplina) : void {\n        this.formLabel = \"Editar Disciplina\";\n        this.isEditMode = true;\n        this.disciplina = disciplina;\n        this.form.get(\"descricaoDisciplina\")?.setValue(disciplina.descricaoDisciplina);\n        this.form.get(\"curso\")?.setValue(disciplina.curso.descricaoCurso);\n        this.form.get(\"professor\")?.setValue(disciplina.professor.nome);\n    };\n\n    delete(disciplina : IDisciplina): void { \n        if(confirm(\"Deseja excluir este Disciplina?\")) {\n          this.disciplinaService.deleteDisciplina(disciplina)\n              .subscribe(response => {\n                    this.getDisciplinas();\n                    this.form.reset();\n              });\n        }\n    };\n    cancel() : void{\n        this.formLabel = \"Adicionar Disciplina\";\n        this.isEditMode = false;\n        this.disciplina = <IDisciplina>{};\n        this.form.get(\"descricaoDisciplina\")?.setValue('');\n        this.form.get(\"curso\")?.setValue('');\n        this.form.get(\"professor\")?.setValue('');\n\n        this.form.dirty;\n    };\n}\n","<h1>Disciplina</h1><br/>\n<hr/>\n<section>\n    <div class=\"row\">\n        <div class=\"col-xs-12 col-sm-8 col-md-10\">\n            <h2>{{formLabel}}</h2><br/>\n            <form (ngSubmit)=\"submit()\" #formDir=\"ngForm\" [formGroup]= \"form\">\n                <div class=\"form-horizontal\">\n                    \n                    <div class=\"form-group\">\n                        <label class=\"control-label col-sm-12\">Descrição Disciplina: </label>\n                        <div class=\"col-xs-12 col-sm-6\">\n                            <input class=\"form-control\" type=\"text\" formControlName= \"descricaoDisciplina\" required>\n                            <div *ngIf=\"descricaoDisciplina.invalid && formDir.submitted\" class=\"validation-error\">\n                                <p *ngIf=\"descricaoDisciplina.errors?.['required']\">o Descrição Disciplina é obrigatório. </p>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class=\"form-group\">\n                        <label class=\"control-label col-sm-12\">Curso: </label>\n                        <div class=\"col-xs-12 col-sm-6\">\n                            <select class=\"form-control form-select\" id=\"curso\" formControlName=\"curso\"> \n                                <option *ngFor=\"let curso of cursos\" [value]=\"curso.descricaoCurso\">{{ curso.descricaoCurso }}</option> \n                            </select>\n                        </div>\n                    </div>\n\n                    <div class=\"form-group\">\n                        <label class=\"control-label col-sm-12\">Professor: </label>\n                        <div class=\"col-xs-12 col-sm-6\">\n                            <select class=\"form-control form-select\" id=\"professor\" formControlName=\"professor\"> \n                                <option *ngFor=\"let professor of professores\" [value]=\"professor.nome\">{{ professor.nome }}</option> \n                            </select>\n                        </div>\n                    </div>\n\n                    <div class=\"form-footer col-xs-12 col-sm-3\">\n                        <button type=\"submit\" class=\"btn btn-primary\" (onSubmit)=\"send($event)\">Salvar</button>&nbsp;&nbsp;&nbsp;\n                        <button type=\"button\" class=\"btn btn-secondary\" (click)=\"cancel()\">Cancelar</button>\n                    </div>\n                </div>\n            </form>\n        </div>\n    </div> \n</section>\n<hr/>\n<table class='table table-striped table-bordered table-condensed table-hover' *ngIf=\"disciplinas.length\">\n    <thead class=\"thead-dark\">\n        <tr class=\"table-light\">\n            <td scope=\"col\">Id Disciplina</td>\n            <td scope=\"col\">Descrição Disciplina</td>\n            <td scope=\"col\">Quantidade Alunos</td>\n            <td scope=\"col\">Curso</td>\n            <td scope=\"col\">Professor</td>\n            <td scope=\"col\">Editar Aluno</td>\n            <td scope=\"col\">Excluir Aluno</td>\n        </tr>\n    </thead>\n    <tbody>\n        <tr *ngFor = 'let disciplina of disciplinas;'>\n            <td class=\"align-middle\" scope=\"row\"> {{disciplina.idDisciplina}}</td>\n            <td class=\"align-middle\" scope=\"row\"> {{disciplina.descricaoDisciplina}}</td>\n            <td class=\"align-middle\" scope=\"row\"> {{disciplina.quantidadeAlunos}}</td>\n            <td class=\"align-middle\" scope=\"row\"> {{disciplina.curso.descricaoCurso}}</td>\n            <td class=\"align-middle\" scope=\"row\"> {{disciplina.professor.nome}}</td>\n            <td class=\"align-middle\" scope=\"row\"><button class=\"btn btn btn-success\" (click)=\"edit(disciplina)\">Editar</button>&nbsp;&nbsp; </td>\n            <td class=\"align-middle\" scope=\"row\"><button class=\"btn btn-danger\" (click)=\"delete(disciplina)\">Delete</button>&nbsp;&nbsp; </td>\n        </tr>\n    </tbody>\n</table>\n<br/>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}