{"ast":null,"code":"import _asyncToGenerator from \"/Users/welingtonmarquezini/Projects/Investment/src/Investment.View/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { EventEmitter } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/nota.service\";\nimport * as i2 from \"@angular/forms\";\nfunction NotaComponent_option_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const aluno_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", aluno_r5.nome);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(aluno_r5.nome);\n  }\n}\nfunction NotaComponent_option_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const disciplina_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", disciplina_r6.descricaoDisciplina);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(disciplina_r6.descricaoDisciplina);\n  }\n}\nfunction NotaComponent_div_30_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"o Valor \\u00E9 obrigat\\u00F3rio. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NotaComponent_div_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtemplate(1, NotaComponent_div_30_p_1_Template, 2, 0, \"p\", 19);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.valorNota.errors == null ? null : ctx_r3.valorNota.errors[\"required\"]);\n  }\n}\nfunction NotaComponent_table_38_tr_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 25);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 25);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 25);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 25);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 25)(10, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function NotaComponent_table_38_tr_16_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const nota_r9 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.edit(nota_r9));\n    });\n    i0.ɵɵtext(11, \"Editar\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\u00A0\\u00A0 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\", 25)(14, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function NotaComponent_table_38_tr_16_Template_button_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const nota_r9 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r12.delete(nota_r9));\n    });\n    i0.ɵɵtext(15, \"Delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16, \"\\u00A0\\u00A0 \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const nota_r9 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", nota_r9.idNota, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", nota_r9.aluno.nome, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", nota_r9.disciplina.descricaoDisciplina, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", nota_r9.valorNota, \"\");\n  }\n}\nfunction NotaComponent_table_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 20)(1, \"thead\", 21)(2, \"tr\", 22)(3, \"td\", 23);\n    i0.ɵɵtext(4, \"Id Disciplina\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 23);\n    i0.ɵɵtext(6, \"Nome Aluno\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 23);\n    i0.ɵɵtext(8, \"Curso => Disciplina do Curso\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 23);\n    i0.ɵɵtext(10, \"Valor da Nota\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 23);\n    i0.ɵɵtext(12, \"Editar Aluno\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\", 23);\n    i0.ɵɵtext(14, \"Excluir Aluno\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(15, \"tbody\");\n    i0.ɵɵtemplate(16, NotaComponent_table_38_tr_16_Template, 17, 4, \"tr\", 24);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(16);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.notas);\n  }\n}\nexport class NotaComponent {\n  constructor(notaService, fb) {\n    this.notaService = notaService;\n    this.fb = fb;\n    this.onSubmit = new EventEmitter();\n    this.notas = [];\n    this.nota = {};\n    this.alunos = [];\n    this.disciplinas = [];\n    this.formLabel = \"\";\n    this.isEditMode = false;\n    this.fb.group({\n      'idNota': [\"\"],\n      'valorNota': [\"\", Validators.required],\n      'disciplina': [\"\", Validators.required],\n      'aluno': [\"\", Validators.required]\n    });\n    this.formLabel = \"Adicionar Nota\";\n  }\n  ngOnInit() {\n    this.getNotas();\n    this.getAlunos();\n    this.getDisciplinas();\n    this.form = new FormGroup({\n      idNota: new FormControl(''),\n      valorNota: new FormControl('', [Validators.required]),\n      disciplina: new FormControl(''),\n      aluno: new FormControl('')\n    });\n  }\n  get idNota() {\n    return this.form.get(\"idNota\");\n  }\n  get valorNota() {\n    return this.form.get(\"valorNota\");\n  }\n  get disciplina() {\n    return this.form.get(\"disciplina\");\n  }\n  get aluno() {\n    return this.form.get(\"aluno\");\n  }\n  getNotas() {\n    this.notaService.getNotas().subscribe(data => {\n      this.notas = data, data.forEach(n => {\n        n.valorNota = parseFloat(n.valorNota.toFixed(2));\n      });\n    }, error => alert(error), () => console.log(this.disciplinas));\n  }\n  getDisciplinas() {\n    this.notaService.getDisciplinas().subscribe(data => {\n      this.disciplinas = data;\n    }, error => alert(error), () => console.log(this.disciplinas));\n  }\n  getAlunos() {\n    this.notaService.getAlunos().subscribe(data => {\n      this.alunos = data;\n    }, error => alert(error), () => console.log(this.alunos));\n  }\n  submit() {\n    if (this.form.invalid) {\n      return;\n    }\n    this.nota.valorNota = this.form.controls['valorNota'].value;\n    this.disciplinas.forEach(d => {\n      if (d.descricaoDisciplina == this.form.controls['disciplina'].value) {\n        this.nota.disciplina = d;\n      }\n    });\n    this.alunos.forEach(a => {\n      if (a.nome == this.form.controls['aluno'].value) {\n        this.nota.aluno = a;\n      }\n    });\n    if (!this.isEditMode) {\n      this.notaService.addNota(this.nota).subscribe(resp => {\n        this.getNotas(), this.form.reset();\n      });\n    } else {\n      this.notaService.editNota(this.nota).subscribe(resp => {\n        this.getDisciplinas(), this.form.reset();\n      });\n      this.cancel();\n    }\n  }\n  send(event) {\n    return _asyncToGenerator(function* () {})();\n  }\n  edit(nota) {\n    this.formLabel = \"Editar Disciplina\";\n    this.isEditMode = true;\n    this.nota = nota;\n    this.form.get(\"valorNota\")?.setValue(nota.valorNota);\n    this.form.get(\"disciplina\")?.setValue(nota.disciplina.descricaoDisciplina);\n    this.form.get(\"aluno\")?.setValue(nota.aluno.nome);\n  }\n  delete(nota) {\n    if (confirm(\"Deseja excluir este Nota?\")) {\n      this.notaService.deleteNota(nota).subscribe(response => {\n        this.getDisciplinas();\n        this.form.reset();\n      });\n    }\n  }\n  cancel() {\n    this.formLabel = \"Adicionar Nota\";\n    this.isEditMode = false;\n    this.nota = {};\n    this.form.get(\"valorNota\")?.setValue('');\n    this.form.get(\"disciplina\")?.setValue('');\n    this.form.get(\"aluno\")?.setValue('');\n    this.form.dirty;\n  }\n}\nNotaComponent.ɵfac = function NotaComponent_Factory(t) {\n  return new (t || NotaComponent)(i0.ɵɵdirectiveInject(i1.NotaService), i0.ɵɵdirectiveInject(i2.FormBuilder));\n};\nNotaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: NotaComponent,\n  selectors: [[\"app-nota\"]],\n  inputs: {\n    onSubmit: \"onSubmit\",\n    btnText: \"btnText\"\n  },\n  decls: 40,\n  vars: 6,\n  consts: [[1, \"row\"], [1, \"col-xs-12\", \"col-sm-8\", \"col-md-10\"], [3, \"formGroup\", \"ngSubmit\"], [\"formDir\", \"ngForm\"], [1, \"form-horizontal\"], [1, \"form-group\"], [1, \"control-label\", \"col-sm-12\"], [1, \"col-xs-12\", \"col-sm-6\"], [\"id\", \"aluno\", \"formControlName\", \"aluno\", 1, \"form-control\", \"form-select\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"disciplina\", \"formControlName\", \"disciplina\", 1, \"form-control\", \"form-select\"], [\"type\", \"number\", \"formControlName\", \"valorNota\", \"required\", \"\", 1, \"form-control\"], [\"class\", \"validation-error\", 4, \"ngIf\"], [1, \"form-footer\", \"col-xs-12\", \"col-sm-3\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"onSubmit\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [\"class\", \"table table-striped table-bordered table-condensed table-hover\", 4, \"ngIf\"], [3, \"value\"], [1, \"validation-error\"], [4, \"ngIf\"], [1, \"table\", \"table-striped\", \"table-bordered\", \"table-condensed\", \"table-hover\"], [1, \"thead-dark\"], [1, \"table-light\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [\"scope\", \"row\", 1, \"align-middle\"], [1, \"btn\", \"btn\", \"btn-success\", 3, \"click\"], [1, \"btn\", \"btn-danger\", 3, \"click\"]],\n  template: function NotaComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\");\n      i0.ɵɵtext(1, \"Nota\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(2, \"br\")(3, \"hr\");\n      i0.ɵɵelementStart(4, \"section\")(5, \"div\", 0)(6, \"div\", 1)(7, \"h2\");\n      i0.ɵɵtext(8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(9, \"br\");\n      i0.ɵɵelementStart(10, \"form\", 2, 3);\n      i0.ɵɵlistener(\"ngSubmit\", function NotaComponent_Template_form_ngSubmit_10_listener() {\n        return ctx.submit();\n      });\n      i0.ɵɵelementStart(12, \"div\", 4)(13, \"div\", 5)(14, \"label\", 6);\n      i0.ɵɵtext(15, \"Aluno: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"div\", 7)(17, \"select\", 8);\n      i0.ɵɵtemplate(18, NotaComponent_option_18_Template, 2, 2, \"option\", 9);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(19, \"div\", 5)(20, \"label\", 6);\n      i0.ɵɵtext(21, \"Disciplina: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"div\", 7)(23, \"select\", 10);\n      i0.ɵɵtemplate(24, NotaComponent_option_24_Template, 2, 2, \"option\", 9);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(25, \"div\", 5)(26, \"label\", 6);\n      i0.ɵɵtext(27, \"Valor da Nota: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"div\", 7);\n      i0.ɵɵelement(29, \"input\", 11);\n      i0.ɵɵtemplate(30, NotaComponent_div_30_Template, 2, 1, \"div\", 12);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(31, \"div\", 13)(32, \"button\", 14);\n      i0.ɵɵlistener(\"onSubmit\", function NotaComponent_Template_button_onSubmit_32_listener($event) {\n        return ctx.send($event);\n      });\n      i0.ɵɵtext(33, \"Salvar\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(34, \"\\u00A0\\u00A0\\u00A0 \");\n      i0.ɵɵelementStart(35, \"button\", 15);\n      i0.ɵɵlistener(\"click\", function NotaComponent_Template_button_click_35_listener() {\n        return ctx.cancel();\n      });\n      i0.ɵɵtext(36, \"Cancelar\");\n      i0.ɵɵelementEnd()()()()()()();\n      i0.ɵɵelement(37, \"hr\");\n      i0.ɵɵtemplate(38, NotaComponent_table_38_Template, 17, 1, \"table\", 16);\n      i0.ɵɵelement(39, \"br\");\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(11);\n      i0.ɵɵadvance(8);\n      i0.ɵɵtextInterpolate(ctx.formLabel);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngForOf\", ctx.alunos);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngForOf\", ctx.disciplinas);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.valorNota.invalid && _r0.submitted);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngIf\", ctx.disciplinas.length);\n    }\n  },\n  styles: [\".validation-error[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] {\\n    color: #dc3545;\\n    margin-top: 0.4em; \\n    border-left: 3px solid O#dc3545;\\n    padding-left: 0.2em;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbm90YS9ub3RhLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxjQUFjO0lBQ2QsaUJBQWlCO0lBQ2pCLCtCQUErQjtJQUMvQixtQkFBbUI7QUFDdkIiLCJzb3VyY2VzQ29udGVudCI6WyIudmFsaWRhdGlvbi1lcnJvciBwIHtcbiAgICBjb2xvcjogI2RjMzU0NTtcbiAgICBtYXJnaW4tdG9wOiAwLjRlbTsgXG4gICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCBPI2RjMzU0NTtcbiAgICBwYWRkaW5nLWxlZnQ6IDAuMmVtO1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["EventEmitter","FormGroup","FormControl","Validators","i0","NotaComponent","constructor","notaService","fb","group","required","formLabel","ngOnInit","getNotas","getAlunos","getDisciplinas","form","idNota","valorNota","disciplina","aluno","get","subscribe","data","notas","forEach","n","parseFloat","toFixed","error","alert","console","log","disciplinas","alunos","submit","invalid","nota","controls","value","d","descricaoDisciplina","a","nome","isEditMode","addNota","resp","reset","editNota","cancel","send","event","edit","setValue","delete","confirm","deleteNota","response","dirty","selectors","inputs","onSubmit","btnText","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/welingtonmarquezini/Projects/Investment/src/Investment.View/ClientApp/src/app/nota/nota.component.ts","/Users/welingtonmarquezini/Projects/Investment/src/Investment.View/ClientApp/src/app/nota/nota.component.html"],"sourcesContent":["import { Component, Input, OnInit, EventEmitter } from '@angular/core';\nimport { FormGroup, FormControl, FormBuilder, Validators } from '@angular/forms';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { IAluno } from '../models/aluno.interface';\nimport { IDisciplina } from '../models/disciplina.interface';\nimport { INota } from '../models/nota.interface';\nimport { NotaService } from '../services/nota.service';\n\n@Component({\n  selector: 'app-nota',\n  templateUrl: './nota.component.html',\n  styleUrls: ['./nota.component.css']\n})\nexport class NotaComponent implements OnInit {\n\n  @Input() onSubmit = new EventEmitter<INota>();\n  @Input() btnText!: string;\n  notas : INota[] = [];\n  nota : INota = <INota>{};\n  alunos : IAluno[] = [];\n  disciplinas : IDisciplina[] = [];\n  formLabel : string = \"\";\n  isEditMode : boolean = false;\n  form! : FormGroup;\n  \n  constructor(private notaService : NotaService,\n              private fb : FormBuilder) {\n            this.fb.group({\n              'idNota' : [\"\"],\n              'valorNota' : [\"\", Validators.required],\n              'disciplina' : [\"\", Validators.required],\n              'aluno' : [\"\", Validators.required]\n            });\n\n        this.formLabel = \"Adicionar Nota\";\n    }\n\n    ngOnInit(): void {\n      this.getNotas();\n      this.getAlunos();\n      this.getDisciplinas();\n      this.form = new FormGroup({\n        idNota: new FormControl(''),\n        valorNota: new FormControl('', [Validators.required]),\n        disciplina: new FormControl(''),\n        aluno: new FormControl('')\n      });\n    }\n    \n    get idNota(){\n      return this.form.get(\"idNota\")!;\n    }\n\n    get valorNota (){\n      return this.form.get(\"valorNota\")!;\n    }\n\n    get disciplina (){\n      return this.form.get(\"disciplina\")!;\n    }\n\n    get aluno (){\n      return this.form.get(\"aluno\")!;\n    }\n\n    private getNotas(){\n      \n        this.notaService.getNotas().subscribe(\n            data => { this.notas = data,\n                data.forEach(n => {\n                  n.valorNota = parseFloat(n.valorNota.toFixed(2));\n                });\n            },\n            error => alert(error),\n            () => console.log(this.disciplinas)\n        );\n    }\n\n    private getDisciplinas(){\n      \n      this.notaService.getDisciplinas().subscribe(\n          data => { this.disciplinas = data},\n          error => alert(error),\n          () => console.log(this.disciplinas)\n      );\n    }\n\n    private getAlunos(){\n      \n      this.notaService.getAlunos().subscribe(\n          data => { this.alunos = data},\n          error => alert(error),\n          () => console.log(this.alunos)\n      );\n    }\n\n    submit() {\n        if (this.form.invalid) {\n          return;\n        }\n\n        this.nota.valorNota = this.form.controls['valorNota'].value;\n        \n        this.disciplinas.forEach(d => {\n          if(d.descricaoDisciplina == this.form.controls['disciplina'].value) {\n            this.nota.disciplina = d;  \n          }\n        });\n        \n        this.alunos.forEach( a =>{\n            if (a.nome == this.form.controls['aluno'].value) {\n              this.nota.aluno = a;  \n            }\n        });\n\n        if(!(this.isEditMode)){\n            this.notaService.addNota(this.nota)\n            .subscribe(resp =>{\n                    this.getNotas(),\n                    this.form.reset()\n            });\n        } else {\n            this.notaService.editNota(this.nota)\n            .subscribe(resp =>{\n                    this.getDisciplinas(),\n                    this.form.reset()\n            });\n            this.cancel();\n        }\n    }\n\n    async send(event : any) {\n    }; \n\n    edit(nota : INota) : void {\n        this.formLabel = \"Editar Disciplina\";\n        this.isEditMode = true;\n        this.nota = nota;\n        this.form.get(\"valorNota\")?.setValue(nota.valorNota);\n        this.form.get(\"disciplina\")?.setValue(nota.disciplina.descricaoDisciplina);\n        this.form.get(\"aluno\")?.setValue(nota.aluno.nome);\n    };\n\n    delete(nota : INota): void { \n        if(confirm(\"Deseja excluir este Nota?\")) {\n          this.notaService.deleteNota(nota)\n              .subscribe(response => {\n                    this.getDisciplinas();\n                    this.form.reset();\n              });\n        }\n    };\n\n    cancel() : void{\n        this.formLabel = \"Adicionar Nota\";\n        this.isEditMode = false;\n        this.nota = <INota>{};\n        this.form.get(\"valorNota\")?.setValue('');\n        this.form.get(\"disciplina\")?.setValue('');\n        this.form.get(\"aluno\")?.setValue('');\n\n        this.form.dirty;\n    };\n}\n","<h1>Nota</h1><br/>\n<hr/>\n<section>\n    <div class=\"row\">\n        <div class=\"col-xs-12 col-sm-8 col-md-10\">\n            <h2>{{formLabel}}</h2><br/>\n            <form (ngSubmit)=\"submit()\" #formDir=\"ngForm\" [formGroup]= \"form\">\n                <div class=\"form-horizontal\">\n\n                    <div class=\"form-group\">\n                        <label class=\"control-label col-sm-12\">Aluno: </label>\n                        <div class=\"col-xs-12 col-sm-6\">\n                            <select class=\"form-control form-select\" id=\"aluno\" formControlName=\"aluno\"> \n                                <option *ngFor=\"let aluno of alunos\" [value]=\"aluno.nome\">{{ aluno.nome }}</option> \n                            </select>\n                        </div>\n                    </div>\n\n                    <div class=\"form-group\">\n                        <label class=\"control-label col-sm-12\">Disciplina: </label>\n                        <div class=\"col-xs-12 col-sm-6\">\n                            <select class=\"form-control form-select\" id=\"disciplina\" formControlName=\"disciplina\"> \n                                <option *ngFor=\"let disciplina of disciplinas\" [value]=\"disciplina.descricaoDisciplina\">{{ disciplina.descricaoDisciplina }}</option> \n                            </select>\n                        </div>\n                    </div>\n                    \n                    <div class=\"form-group\">\n                        <label class=\"control-label col-sm-12\">Valor da Nota: </label>\n                        <div class=\"col-xs-12 col-sm-6\">\n                            <input class=\"form-control\" type=\"number\" formControlName= \"valorNota\" required>\n                            <div *ngIf=\"valorNota.invalid && formDir.submitted\" class=\"validation-error\">\n                                <p *ngIf=\"valorNota.errors?.['required']\">o Valor é obrigatório. </p>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class=\"form-footer col-xs-12 col-sm-3\">\n                        <button type=\"submit\" class=\"btn btn-primary\" (onSubmit)=\"send($event)\">Salvar</button>&nbsp;&nbsp;&nbsp;\n                        <button type=\"button\" class=\"btn btn-secondary\" (click)=\"cancel()\">Cancelar</button>\n                    </div>\n                </div>\n            </form>\n        </div>\n    </div> \n</section>\n<hr/>\n<table class='table table-striped table-bordered table-condensed table-hover' *ngIf=\"disciplinas.length\">\n    <thead class=\"thead-dark\">\n        <tr class=\"table-light\">\n            <td scope=\"col\">Id Disciplina</td>\n            <td scope=\"col\">Nome Aluno</td>\n            <td scope=\"col\">Curso => Disciplina do Curso</td>\n            <td scope=\"col\">Valor da Nota</td>\n            <td scope=\"col\">Editar Aluno</td>\n            <td scope=\"col\">Excluir Aluno</td>\n        </tr>\n    </thead>\n    <tbody>\n        <tr *ngFor = 'let nota of notas;'>\n            <td class=\"align-middle\" scope=\"row\"> {{nota.idNota}}</td>\n            <td class=\"align-middle\" scope=\"row\"> {{nota.aluno.nome}}</td>\n            <td class=\"align-middle\" scope=\"row\"> {{nota.disciplina.descricaoDisciplina}}</td>\n            <td class=\"align-middle\" scope=\"row\"> {{nota.valorNota}}</td>\n            <td class=\"align-middle\" scope=\"row\"><button class=\"btn btn btn-success\" (click)=\"edit(nota)\">Editar</button>&nbsp;&nbsp; </td>\n            <td class=\"align-middle\" scope=\"row\"><button class=\"btn btn-danger\" (click)=\"delete(nota)\">Delete</button>&nbsp;&nbsp; </td>\n        </tr>\n    </tbody>\n</table>\n<br/>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}